<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="2">
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .message-content {
            white-space: pre-wrap;
            word-wrap: break-word;
            display: block;
            margin-top: 2px;
        }
    </style>
</head>
<body style="background: #000; padding: 0; margin: 0; overflow-x: hidden; overflow-y: auto;">
    <div class="chat-box">
        {{range .Messages}}
        <div class="message" style="border-left: 3px solid {{.Color}}; padding-left: 10px; margin-bottom: 8px;">
            <span class="time" style="color: #666; font-size: 0.8em;">[{{.Timestamp.Format "15:04"}}]</span>
            
            {{if and .IsEncrypted (eq .Target $.Username)}}
                <span style="color: #ff0000; font-weight: bold;">[for you] </span>
            {{end}}
            
            <span class="user" style="color: {{.Color}}; font-weight: bold;">{{.Sender}}:</span><div class="text message-content" style="color: {{.Color}};">{{if .IsEncrypted}}{{if eq .Target $.Username}}{{.Content}}{{else}}<span style="opacity: 0.5;">[Encrypted]</span>{{end}}{{else}}{{.Content}}{{end}}</div>
        </div>
        {{end}}
        <div id="bottom"></div>
    </div>
</body>
</html>