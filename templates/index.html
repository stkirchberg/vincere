<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="10">
    <link rel="stylesheet" href="/static/style.css">
    <title>vincere</title>
</head>
<body>
    <div class="container">
        <h1>vincere</h1>
        {{if .Username}}
        <div class="chat-box">
            {{range .Messages}}
            <div class="message" style="border-left-color: {{.NameColor}};">
                <span class="time">[{{.Timestamp.Format "15:04"}}]</span>
                <span class="user" style="color: {{.NameColor}};">{{.Sender}}:</span>
                <span class="text" style="color: {{.ChatColor}};">
                    {{if .IsEncrypted}}
                        {{if eq .Target $.Username}} {{.Content}} {{else}} <span class="enc-label">[Encrypted Message]</span> {{end}}
                    {{else}}
                        {{.Content}}
                    {{end}}
                </span>
            </div>
            {{end}}
        </div>
        <form action="/send" method="POST" class="msg-form">
            <input type="text" name="text" placeholder="Message or @User" autofocus autocomplete="off">
            <button type="submit">SEND</button>
        </form>
        <div class="footer">
            Logged in as: <b style="color: {{.UserColor}};">{{.Username}}</b> | <a href="/logout">Logout</a>
        </div>
        {{else}}
        <form action="/login" method="POST" class="login-form">
            <input type="text" name="username" placeholder="Username" required>
            <div class="settings">
                <label>Name: <input type="color" name="name_color" value="#00ff00"></label>
                <label>Text: <input type="color" name="chat_color" value="#ffffff"></label>
            </div>
            <button type="submit">ENTER</button>
        </form>
        {{end}}
    </div>
</body>
</html>